pipeline{
    agent any
    
    stages{
        stage('Checkout...'){
            steps{
                echo "Checkout code..."
            }
        }
        
        stage('Hello'){
            steps{                
                sh "python section-08-deploying-with-containers/hello.py"                
                sh """
                "echo "alias python='python3.9'" >> .bashrc"
                "source .bashrc"
                python --version
                python ./test.py
                """
            }
        }
        
        stage('TOX-Train model..'){
            steps{
                echo "running text on Section-05 Model Package"
                //sh "python section-05-production-model-package/regression_model/train_pipeline.py" 
                script{
                    sh "echo "alias python='python3.9'" >> .bashrc"
                    sh "source .bashrc"
                    sh "python3 -m tox -c section-05-production-model-package/tox.ini -e train"
                }
            }
        }

        stage('Deploying to prod'){
            steps{
                mvn 'clean install'
            }
        }
    }
}


